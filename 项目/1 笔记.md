![image-20221016203245664](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162032821.png)



借鉴 redis 的过期策略，主动+被动

![image-20221016203302772](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162033798.png)











![image-20221016203351272](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162033320.png)

 

查找

![image-20221016203544545](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162035591.png)



领取



 ![image-20221016203652228](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162036268.png)





结算/核销



![image-20221016203745186](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162037240.png)



结算



![image-20221016204422469](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162044532.png)



优惠券码缓存

![image-20221016221220113](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162212167.png)

![image-20221016221124364](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162211613.png)





架构

![image-20221016221334786](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162213845.png)

功能设计

![image-20221016221348113](https://raw.githubusercontent.com/erdengk/picGo/main/img/202210162213141.png)









异步任务是否返回，如果失败怎么处理

定时任务相关



